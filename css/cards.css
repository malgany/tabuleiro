.card,
.spacer {
  border-radius: 10px;
}

.spacer { /* espaço vazio */
  outline: 2px dashed transparent;
}

.card {
  background: var(--card);
  border: 2px solid var(--card-border);
  box-shadow: 0 4px 10px rgba(0,0,0,.12);
  position: relative;
}

/* Unidade sobre a célula */
.unit {
  position: absolute;
  transform: translate(-50%, -50%);
  width: 60%;
  aspect-ratio: 1 / 1;
  background: rgba(17, 24, 39, 0.9);
  border: 2px solid #fff;
  border-radius: 8px;
  box-shadow: 0 6px 12px rgba(0,0,0,.25);
  cursor: pointer;
  transition: transform 0.3s linear;
}

.unit.shake {
  animation: shake 0.3s;
}

/* Alcance (células verdes) */
.card.reachable {
  cursor: pointer;
}

.card.path {
  background: rgba(16, 185, 129, 0.3);
  background-image: none;
}

.card.attackable {
  background: rgba(59, 130, 246, 0.3);
  background-image: none;
}

/* Diferenciar unidades e turno ativo */
.unit.unit-blue { background: rgba(29, 78, 216, 0.9); }
.unit.unit-red { background: rgba(220, 38, 38, 0.9); }
.unit.is-active { box-shadow: 0 0 0 3px #fff, 0 0 0 6px rgba(16,185,129,.9); }

/* Tooltip de inimigo */
.enemy-tooltip {
  position: absolute;
  background: rgba(17,24,39,.9);
  color: #fff;
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 14px;
  pointer-events: none;
  display: none;
  z-index: 20;
}

.enemy-tooltip::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 10px;
  border-width: 6px;
  border-style: solid;
  border-color: rgba(17,24,39,.9) transparent transparent transparent;
}
/* Face simplificada: cantos com Naipe/A */
.card.face::before,
.card.face::after {
  content: "A";
  position: absolute;
  font-weight: 800;
  font-size: clamp(14px, 1.8vw, 18px);
}

.card.face::before {
  left: 8px; top: 6px;
}
.card.face::after {
  right: 8px; bottom: 6px;
}

/* Naipe central */
.card.face::marker { content: ""; }
.card.face .pip { display: none; }

.card.face.diamond { --pip: "◆"; --pip-color: var(--red); }
.card.face.club { --pip: "♣"; --pip-color: var(--black); }

.card.face > .center {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: clamp(26px, 5vw, 44px);
  color: var(--pip-color);
}

.card.face.diamond::before,
.card.face.diamond::after { color: var(--red); }
.card.face.club::before,
.card.face.club::after { color: var(--black); }

/* Verso simplificado */
.card.back {
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,.9), rgba(255,255,255,0) 40%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 6px, rgba(255,255,255,0) 6px 12px);
  border-width: 3px;
}
.card.back.red { border-color: var(--red); }
.card.back.blue { border-color: var(--blue); }

/* Inserir pip central via elemento extra, usando pseudo grid helper */
.card.face::after,
.card.face::before { letter-spacing: 1px; }

.card.face::before { content: "A"; }
.card.face::after { content: "A"; }

/* Elemento central usando ::part alternativo com wrapper */
.card.face::outline { content: ""; }

/* Utilitário para inserir o pip */
.card.face::selection { background: transparent; }

/* Usa um pseudo-elemento adicional dentro via background text */
.card.face { display: grid; place-items: center; }
.card.face::before { justify-self: start; align-self: start; margin: 6px 0 0 8px; }
.card.face::after { justify-self: end; align-self: end; margin: 0 8px 6px 0; }
.card.face::marker { color: transparent; }
.card.face::backdrop { color: transparent; }

/* pip central como texto do próprio elemento */
.card.face { font-variant-numeric: lining-nums; }
.card.face.diamond { color: var(--red); }
.card.face.club { color: var(--black); }
.card.face::before { content: "A"; }
.card.face::after { content: "A"; }
.card.face::part(pip) { display: none; }

.card.face::after,
.card.face::before { font-family: inherit; }

.card.face::after,
.card.face::before { line-height: 1; }

.card.face::after,
.card.face::before { font-weight: 800; }

.card.face::after,
.card.face::before { font-size: clamp(14px, 1.8vw, 18px); }

.card.face::after,
.card.face::before { color: currentColor; }

.card.face::after,
.card.face::before { opacity: 0.95; }

.card.face::before { position: absolute; left: 8px; top: 6px; }
.card.face::after { position: absolute; right: 8px; bottom: 6px; }

/* removidos blocos vazios para manter o CSS limpo */

/* Pip central via ::before of child created in HTML (simpler) */
/* helper não utilizado removido */

/* Ajuste do conteúdo central real */
.card.face > .center::before {
  content: var(--pip);
}

.float-text {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translate(-50%, -100%);
  animation: fadeUp 1.2s ease-out forwards;
  pointer-events: none;
  font-size: 20px;
  font-weight: bold;
}

.float-text.pm {
  color: #16a34a;
}

.float-text.pa {
  color: #3b82f6;
}

.float-text.pv {
  color: #dc2626;
}

@keyframes shake {
  0%, 100% {
    transform: translate(-50%, -50%);
  }
  25% {
    transform: translate(calc(-50% + 4px), -50%);
  }
  75% {
    transform: translate(calc(-50% - 4px), -50%);
  }
}

@keyframes fadeUp {
  from {
    opacity: 1;
    transform: translate(-50%, -100%) translateY(0);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -100%) translateY(-20px);
  }
}

.chest {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80px;
  height: 60px;
  cursor: pointer;
}

.chest .lid,
.chest .box {
  position: absolute;
  left: 0;
  width: 100%;
  background: #b45309;
  border: 2px solid #78350f;
}

.chest .lid {
  height: 20px;
  top: 0;
  transition: transform 0.3s;
  transform-origin: top;
}

.chest .box {
  bottom: 0;
  height: 40px;
}

.chest:hover .lid {
  transform: translateY(-100%);
}

.loot {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  gap: 8px;
}

.loot-item {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  background: rgba(17, 24, 39, 0.9);
}

